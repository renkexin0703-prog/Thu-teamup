<!-- 筛选栏 -->
<view class="filter-bar">
  <view class="filter-title">筛选：</view>
  <picker mode="selector" range="{{filterOptions.gender}}" bindchange="onGenderChange">
    <view class="filter-tag">性别：{{currentFilter.gender}}</view>
  </picker>
  <picker mode="multiSelector" range="{{[filterOptions.departments]}}" bindchange="onDeptChange">
    <view class="filter-tag">院系：{{currentFilter.departments.length > 0 ? currentFilter.departments.join(',') : '不限'}}</view>
  </picker>
  <picker mode="selector" range="{{filterOptions.grades}}" bindchange="onGradeChange">
    <view class="filter-tag">年级：{{currentFilter.grade || '不限'}}</view>
  </picker>
  <picker mode="multiSelector" range="{{[filterOptions.skills]}}" bindchange="onSkillChange">
    <view class="filter-tag">技能：{{currentFilter.skills.length > 0 ? currentFilter.skills.join(',') : '不限'}}</view>
  </picker>
</view>

<!-- 发布组队按钮 -->
<view class="btn" style="margin: 10px;" bindtap="gotoPublishTeamUp">发起组队</view>

<!-- 组队帖子列表 -->
<view class="teamup-list">
  <block wx:for="{{filteredTeamUpPosts}}" wx:key="id">
    <view class="card" wx:if="{{item.isActive}}">
      <view class="post-header">
        <image src="{{item.userAvatar}}" class="avatar" />
        <view class="user-info">
          <view class="username">{{item.userName}}</view>
          <view class="user-dept">{{item.userDepartment}} {{item.userGrade}}</view>
        </view>
        <view class="gender-tag">{{item.gender}}</view>
      </view>
      <view class="post-title">{{item.title}}</view>
      <view class="post-content">{{item.content}}</view>
      <view class="post-skills">
        <block wx:for="{{item.skills}}" wx:key="*this">
          <view class="skill-tag">{{item}}</view>
        </block>
      </view>
      <view class="post-footer">
        <view class="view-count">浏览：{{item.viewCount}}</view>
        <view class="btn" bindtap="onContactTap" data-wechat="{{item.contactWechat}}">联系TA</view>
        
        <!-- 只有自己发起的帖子才显示选择队友按钮 -->
        <view wx:if="{{item.userId === 'user_001'}}" class="btn" style="background: #5cb85c;" bindtap="onSelectMember" data-post-id="{{item.id}}">选择队友</view>
      </view>
    </view>
  </block>
</view>